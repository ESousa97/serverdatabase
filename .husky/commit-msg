# Validate commit message format (Conventional Commits)
commit_regex='^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\(.+\))?: .{1,72}'

commit_msg=$(cat "$1")

if ! echo "$commit_msg" | grep -qE "$commit_regex"; then
  echo ""
  echo "❌ Commit message inválida!"
  echo ""
  echo "O formato deve seguir Conventional Commits:"
  echo "  tipo(escopo): descrição"
  echo ""
  echo "Tipos permitidos:"
  echo "  feat     - Nova funcionalidade"
  echo "  fix      - Correção de bug"
  echo "  docs     - Documentação"
  echo "  style    - Formatação (não altera código)"
  echo "  refactor - Refatoração"
  echo "  test     - Testes"
  echo "  chore    - Manutenção"
  echo "  perf     - Performance"
  echo "  ci       - CI/CD"
  echo "  build    - Build/Deps"
  echo "  revert   - Reverter commit"
  echo ""
  echo "Exemplo: feat(auth): add refresh token rotation"
  echo ""
  exit 1
fi
